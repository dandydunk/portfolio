<script>
    $(document).ready(function(){
        $("#datePicker").datepicker();

        $("#buttonReserve").click(function(){
            $(this).attr("disabled", "disabled");
            var self = $(this);
            var data = {};
            var ajax = $.post("/inventory/newPost", data, function(data){
                if(data.error) {
                    alert(data.error);
                }

                $(self).removeAttr("disabled");
            }, "json");

            ajax.fail(function(){
                alert("ajax failed.");
                $(self).removeAttr("disabled");
            });
        });
    });

    var loadingPictures = 0;
    function ManagePictures(id) {
        if(loadingPictures) return;

        loadingPictures = 1;
        var ajax = $.get("/inventory/getPictures/"+id, null,
            function(picture){
                var html = "";
                for(var i = 0; i < picture.length; i++) {
                    html += "<div class='col-lg-3'><img src='"+picture[i].path+"' width='200' /></div>";
                }

                $("#picturesHolder").html(html);
                $("#modalManagePictures").modal();
                loadingPictures = 0;
            }, "json");
    }

    function Reserve(id, title) {
      $("#reserveMovieTitle").html(title);
      $("#modalReserve").modal();
    }

</script>

<div class="row">
  <% @inventories.each do |inventory| %>
  <div class="col-md-4">
    <div class="row">
      <div class="col-lg-12">
        <a href="/inventory/show/<%= inventory.id %>"><%= inventory.name %></a>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <img src="<%= inventory.picturePath %>" width="200" height="200">
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <%= inventory.amount_in_stock %> in stock
      </div>
    </div>


    <div class="row">
      <div class="col-lg-12">
        <button type="button" class="btn btn-info btn-lg" onclick="Reserve(<%= inventory.id %>, '<%= inventory.name %>')">Reserve</button>
      </div>
    </div>
  </div>
  <% end %>
</div>



<!-- Modal -->
<div id="modalReserve" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Reserve: <span id="reserveMovieTitle"></span></h4>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-lg-12">
              <input type="text" placeholder="Pick up Date" id="datePicker" />
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default">Save</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
</div>